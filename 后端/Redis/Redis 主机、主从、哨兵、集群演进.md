### Redis 哨兵(Sentinel)模式



###### [Redis单机、主从、哨兵、集群演进之路 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/596995935)



> ##### Redis 架构演进
>
> 1. ###### 为什么需要主从
>
> 2. ###### 为什么需要哨兵
>
> 3. ###### 有了主从和哨兵为什么要有分片集群呢



- #### 单机时代

  ##### 为了学习和了解这门技术，简单部署redis

  

- #### 主从时代

  ##### 随着对Redis的进一步深入、很快就会发现这门技术在很多场景下都能得到应用，比如：并发场景下对共享资源的控制（分布式锁）、高并发长场景下对系统的保护（限流）、高并发场景下对响应时间的要求（缓存）

  ##### 在生产环境使用Redis服务时，仅仅部署一个Redis实例是不够的，若实例出现故障，使用Redis的业务都会收到影响，为了降低单实例故障带来的影响，通常会选择冗余的方式来保证服务的高可靠性，在Redis中，我们称之为主-从

  

- #### 哨兵时代

  ##### Redis进行了主-从部署后并不能高枕无忧，还需要时时刻刻的监控<font color='red'>Redis主</font>的健康的状态，当其出现故障的第一时间能发现并能在从库中完成选主任务，否则同样会给业务带来影响。在Redis中通常使用<font color='red'>哨兵机制</font>来帮我们来完成<font color='red'>监控、选主和通知操作</font>，从而是我们的Redis服务具备一定的可靠性。



- #### 集群分片时代

  ##### 随着业务的发展越来越快，Redis实例中存放的数据越来越多，当需要存储25G以上的数据的时候，估计会选择一个32G的机器进行部署，这样简单的操作隐藏着严重的问题：

  - ##### Redis中存放的数据越多，意味着宕机后回复时间也越长，从而导致服务长时间不可用

  - ##### 越来越多的数据进行rdb frok操作的时候，阻塞Redis主线程的时间也越长，从而导致服务响应慢

  ##### 面对此类问题我们通常会基于<font color='red'>大而化小、分而治之</font>的思想进行解决，在Redis中我们称为集群分片技术

​		